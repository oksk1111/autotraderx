# 워뇨띠 스타일 단기 트레이딩 가이드 ⚡

## 📋 개요

이 시스템은 **워뇨띠 스타일의 단기 트레이딩 전략**을 기반으로 설계되었습니다.
- **절대 장기 보유 금지** ❌
- **빠른 진입, 빠른 청산** ✅
- **소액 분산 투자로 리스크 최소화** 🛡️

---

## 🎯 핵심 전략

### 1. 손절/익절 라인 (타이트한 관리)

| 구분 | 설정값 | 설명 |
|------|--------|------|
| **손절 라인** | **-2%** | 2% 손실 시 즉시 매도 (기존: -3%) |
| **익절 라인** | **+2%** | 2% 수익 시 즉시 매도 (기존: +5%) |
| **포지션 타임아웃** | **30분** | 30분 이상 보유 금지 (신규) |

```python
# backend/app/core/config.py
stop_loss_percent: float = 2.0      # -2% 손절
take_profit_percent: float = 2.0    # +2% 익절
max_position_hold_minutes: int = 30 # 최대 30분 보유
```

### 2. 투자 비율 (소액 분산)

| ML 신뢰도 | 투자 비율 | 변경 사항 |
|-----------|----------|-----------|
| **80% 이상** | 15% | 기존 30% → 15% (50% 감소) |
| **70-80%** | 10% | 기존 20% → 10% (50% 감소) |
| **60-70%** | 7% | 기존 15% → 7% (53% 감소) |
| **60% 미만** | 5% | 기존 10% → 5% (50% 감소) |

**예시:**
- 가용 자금: 100,000원
- ML 신뢰도: 85%
- 투자 금액: 100,000 × 0.15 = **15,000원** (기존: 30,000원)

### 3. 매매 주기

현재: **5분 (300초)**

```bash
# .env
TRADING_CYCLE_SECONDS=300
```

⚠️ **워뇨띠 기획 문서의 1-5초 Tick 단위는 현재 비활성화 상태**
- 이유: 과도한 매매로 인한 손실 발생 (9% 손실 사례)
- 5분 주기 + 신호 필터링으로 안정적 운영 중

---

## 🔄 매매 시나리오

### ✅ 성공 시나리오 (2% 익절)

```
시간     | 가격      | 행동        | 수익률
---------|-----------|------------|--------
09:00:00 | 100,000원 | 매수       | 0%
09:05:00 | 101,000원 | 보유       | +1%
09:10:00 | 102,000원 | 매도 (익절)| +2% ✅
```

**결과:** 15,000원 투자 → 15,300원 회수 (+300원)

### ❌ 손절 시나리오 (-2% 손절)

```
시간     | 가격      | 행동        | 수익률
---------|-----------|------------|--------
09:00:00 | 100,000원 | 매수       | 0%
09:05:00 | 99,000원  | 보유       | -1%
09:10:00 | 98,000원  | 매도 (손절)| -2% 🛑
```

**결과:** 15,000원 투자 → 14,700원 회수 (-300원)

### ⏰ 타임아웃 시나리오 (30분 강제 청산)

```
시간     | 가격      | 행동              | 수익률
---------|-----------|-------------------|--------
09:00:00 | 100,000원 | 매수             | 0%
09:15:00 | 100,500원 | 보유 (+0.5%)     | +0.5%
09:30:00 | 100,800원 | 강제 매도 (타임아웃)| +0.8% ⏰
```

**결과:** 15,000원 투자 → 15,120원 회수 (+120원)
- 2% 익절 미도달이지만 30분 경과로 강제 청산
- 작은 수익이라도 확보 (장기 보유 금지 원칙)

---

## 📊 워뇨띠 vs 현재 시스템 비교

| 항목 | 워뇨띠 기획 | 현재 시스템 | 상태 |
|------|------------|------------|------|
| 매매 주기 | 1-5초 Tick | 5분 (300초) | ⚠️ 안정성 우선 |
| 손절 라인 | -1% ~ -2% | -2% | ✅ 적용 |
| 익절 라인 | +1% ~ +3% | +2% | ✅ 적용 |
| 투자 비율 | 소액 분산 | 5-15% | ✅ 적용 |
| 포지션 유지 | 장기 보유 금지 | 최대 30분 | ✅ 적용 |
| 주요 지표 | MACD, RSI, MFI | LSTM + LightGBM | ⚠️ ML 기반 |

---

## 🚀 적용 효과

### 1. 리스크 감소 📉
- 손절 -3% → -2%: **손실 33% 감소**
- 투자 비율 50% 감소: **최대 손실액 50% 감소**

**예시:**
```
기존: 30,000원 × 3% 손실 = -900원
현재: 15,000원 × 2% 손실 = -300원
개선: -600원 (66% 개선) ✅
```

### 2. 빠른 회전율 🔄
- 익절 +5% → +2%: **목표 달성 시간 60% 단축**
- 포지션 타임아웃 30분: **자금 회전율 향상**

### 3. 감정 배제 🤖
- ML 기반 자동 매매: **객관적 판단**
- 신호 필터링: **과도한 매매 방지**
- 타임아웃: **손실 포지션 장기 보유 방지**

---

## 📈 예상 성과

### 일일 거래 시나리오 (10번 거래)

```
성공률 60% 가정:
- 성공 6회: +2% × 6 = +12%
- 실패 4회: -2% × 4 = -8%
- 순수익: +4%

투자 금액 100,000원 기준:
- 일일 수익: +4,000원
- 월 수익 (20일): +80,000원 (+80%)
```

⚠️ **주의:** 실제 수익률은 시장 상황과 ML 모델 정확도에 따라 다름

---

## 🛠️ 설정 변경 방법

### 1. 손절/익절 조정

```python
# backend/app/core/config.py
stop_loss_percent: float = 2.0    # 손절: -2%
take_profit_percent: float = 2.0  # 익절: +2%
```

더 보수적: -1.5% / +1.5%
더 공격적: -3% / +3%

### 2. 투자 비율 조정

```python
# backend/app/trading/engine.py (line 68-75)
if confidence >= 0.8:
    investment_ratio = 0.15  # 15%
elif confidence >= 0.7:
    investment_ratio = 0.10  # 10%
```

더 보수적: 0.05 ~ 0.10 (5-10%)
더 공격적: 0.10 ~ 0.20 (10-20%)

### 3. 포지션 타임아웃 조정

```python
# backend/app/core/config.py
max_position_hold_minutes: int = 30  # 30분
```

더 짧게: 15분 (초단타)
더 길게: 60분 (유연한 운영)

---

## 🔍 모니터링 포인트

### 실시간 로그 확인

```bash
# 매매 로그
docker compose logs worker -f | grep -E "(✅|🛑|⏰|ML 예측)"

# 손익 현황
docker compose logs worker -f | grep "Account Info"
```

### 주요 지표

1. **평균 보유 시간** ⏱️
   - 목표: 10-30분
   - 30분 초과 시 타임아웃 작동

2. **손익비** 📊
   - 목표: 승률 60% 이상
   - 손익비 1:1 (손절 -2%, 익절 +2%)

3. **일일 거래 횟수** 📈
   - 목표: 5-15회 (5분 주기 기준)
   - 과도한 거래 시 신호 필터링 강화 필요

---

## ⚠️ 주의사항

### 1. 급변동 시장 🌊
- 변동성 5% 이상: 신규 진입 금지
- 긴급 매도 시스템 자동 작동

### 2. 수수료 고려 💰
- 업비트 수수료: 0.05%
- 매수/매도 왕복: 0.1%
- 실제 수익: 익절 +2% - 수수료 0.1% = **+1.9%**

### 3. 연속 손실 시 대응 📉
- 3회 연속 손절 시: 자동 매매 일시 중지 권장
- 시장 상황 재분석 필요

---

## 📚 관련 문서

- [신호 필터링 가이드](./SIGNAL_FILTERING_GUIDE.md) - 연속 신호 차단 로직
- [긴급 매매 가이드](./EMERGENCY_TRADING_GUIDE.md) - 긴급 상황 대응
- [가상화폐 자동 매매 기획](./가상화폐%20자동%20매매%20기획.md) - 워뇨띠 스타일 원본

---

## 🎓 결론

워뇨띠 스타일 단기 트레이딩의 핵심:
1. ✅ **타이트한 손절/익절** (-2% / +2%)
2. ✅ **소액 분산 투자** (5-15%)
3. ✅ **빠른 포지션 회전** (최대 30분)
4. ✅ **절대 장기 보유 금지** (타임아웃 강제 청산)

**작은 수익을 자주, 안전하게 쌓아가는 것이 목표입니다.** 💪
